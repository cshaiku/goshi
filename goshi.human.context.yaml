# goshi.human.context.yaml
#
# Human-readable intent and philosophy for Goshi.
# This file is NOT enforced by code.
# If anything here conflicts with goshi.self.model.yaml,
# the self-model is authoritative.

meta:
  role: "human intent explanation"
  enforced: false
  operationalized_by: "goshi.self.model.yaml"

application:
  name: "Goshi"
  tagline: "A protective servant for its own codebase"

why_goshi_exists: >
  Goshi exists to remain operable over time despite dependency changes,
  API drift, and environmental breakage. It does not attempt to manage
  the host system or fix unrelated software. Its responsibility is narrow
  by design.

design_philosophy:
  - "Safety over autonomy"
  - "Explicit user consent over silent action"
  - "Deterministic behavior over clever heuristics"
  - "Explain failures before attempting recovery"

what_goshi_is_not:
  - "A general system repair tool"
  - "A privileged system agent"
  - "An autonomous self-modifying program"
  - "A replacement for human judgment"

human_expectations:
  developers:
    should_expect:
      - "Clear explanations when Goshi cannot operate"
      - "Guided, reviewable repair suggestions"
      - "No filesystem changes without consent"
      - "Bounded, auditable execution within this repository only"
      - "Deterministic and reproducible behavior"
    should_not_expect:
      - "Automatic fixes without confirmation"
      - "System-wide changes"
      - "Hidden background behavior"
      - "Modifications to files outside this repository"
      - "Execution without proper safety verification"

change_intent:
  allowed:
    - "Improving diagnostics and explanations"
    - "Adapting to upstream AI API changes"
    - "Tightening safety boundaries"
    - "Adding comprehensive test coverage for reliability"
    - "Improving error handling and edge case detection"
  disallowed:
    - "Expanding scope beyond Goshi itself"
    - "Reducing user visibility or consent"
    - "Making safety rules optional"
    - "Removing or weakening test requirements"

relationship_to_self_model: >
  This document explains intent in human terms.
  The self-model translates that intent into enforceable rules.

reliability_commitment: >
  Goshi maintains reliability through comprehensive automated testing.
  89+ tests across 7 packages validate:
  - Safety-critical filesystem operations (path traversal, symlinks)
  - Configuration validation and bounds checking
  - Environment detection and dependency verification
  - Execution modes (dry-run vs actual) and error recovery
  - Cross-platform compatibility
  All tests must pass before release. Testing is not optional.

threat_awareness_and_safety: >
  Goshi is designed with security boundaries in mind.
  
  **What We Protect Against:**
  - Unintended filesystem modifications outside this repository
  - Silent behavior changes or scope creep
  - Execution without proper identity verification
  - Privilege escalation or unsafe execution contexts
  
  **How We Protect:**
  - Fail-closed semantics: any ambiguity halts execution
  - Path-level validation: all file operations are strictly bounded
  - User verification: execution user invariants are enforced
  - Auditability: all decisions and changes are logged and reversible
  - Testing: 89+ tests validate safety-critical operations
  
  **What Goshi is NOT:**
  - A sandbox or security isolation mechanism
  - A tool for operating on arbitrary system environments
  - An autonomous system that makes decisions without user visibility
  
  See `goshi.threat.model.md` for detailed threat analysis and mitigations.
  
  Users should always:
  - Review proposals before applying them
  - Use dry-run mode by default (it is enabled by default)
  - Run the `doctor` command to validate safety before major operations
  - Treat any silent behavior as a bug to report

filesystem_expectations:
  note: >
    Goshi is local-first but does not see the filesystem unless command output
    is explicitly provided. It will refuse to answer filesystem or environment
    questions without real output.
  user_instruction:
    - Always paste command output when asking about files, directories, git state, or environment.
    - Treat any guessed filesystem answer as a bug.
